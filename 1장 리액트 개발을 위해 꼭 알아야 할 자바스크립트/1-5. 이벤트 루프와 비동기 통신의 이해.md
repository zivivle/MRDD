## 1-5. 이벤트 루프와 비동기 통신의 이해

- 비동기 코드 작동 방식을 이해하면 자바스크립트가 작업을 동시에 처리하는 방법, 태스크에 대한 우선순위, 주의할 점을 파악해 더욱 매끄러운 웹 애플리케이션 서비스를 제공할 수 있다.

- 자바스크립트는 싱글 스레드에서 작동한다. 즉, 한 번에 하나의 작업을 동기 방식으로만 처리할 수 있다.

#### 동기 방식과 비동기 방식

- 동기 방식은 직렬 방식으로 요청이 시작된 이후 응답을 받아야 다른 작업을 처리한다.
  직관적이지만 한 번에 많은 작업을 처리할 수 없다.
- 비동기 방식은 병렬 방식으로 응답을 받지 않아도 다음 작업을 처리한다.
  한 번에 여러 작업이 실행될 수 있다.

### 1-5-1 싱글 스레드 자바스크립트

#### 프로세스와 스레드

**프로세스**:

- 프로그램을 구동해 프로그램의 상태가 메모리상에서 실행되는 작업단위
- 하나의 프로그램을 실행하면 하나의 프로세스가 할당되어 거기에서 모든 작업이 처리
  **스레드**:
- 프로세스보다 작은 실행 단위로, 하나의 프로세스에서 여러 개의 스레드를 활용해 동시 다발적 작업 가능
- 스레드끼리는 메모리를 공유할 수 있어 여러 작업을 동시에 수행 가능
  > **자바스크립트는 왜 싱글 스레드로 설계되었을까?** <br/>
  > 최초의 자바스크립트는 브라우저에서 HTML을 그리는 제한적 용도였고, 동시에 여러 스레드에서 DOM을 조작할 경우 DOM 표시에 문제가 생길 수 있기 때문.<br/>
  > 자바스크립트는 싱글 스레드로 코드의 실행이 하나의 스레드에서 순차적으로 이루어지지만, 자바스크립트 런타임 외부에서 이벤트 루프를 사용해 비동기 코드를 처리할 수 있다.

### 1-5-2 이벤트 루프란?

#### 호출 스택과 이벤트 루프

- 호출 스택(=콜스택): 자바스크립트에서 수행해야 할 코드나 함수를 순차적으로 담아두는 스택

- 이벤트 루프: 이벤트 루프의 단일 스레드에서 콜 스택과 태스크 큐 내부에 대기 중인 함수가 있는지 반복적으로 확인하고, 실행 가능한 오래된 것부터 자바스크립트 엔진을 이용해 실행

- 동기 함수는 자바스크립트 코드를 동기식으로 실행하는 메인 스레드에서 실행
  비동기 함수는 브라우저나 Node.js가 별도의 스레드에서 태스크 큐에 작업을 할당해 실행
- 태스크 큐: 비동기 함수의 콜백 함수나 이벤트 핸들러 같은 실행해야 할 태스크의 집합(Set)
